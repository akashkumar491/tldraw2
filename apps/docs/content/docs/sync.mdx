---
title: Sync
status: published
author: alex
date: 7/11/2024
order: 6
keywords:
  - data
  - sync
  - persistence
  - database
  - multiplayer
  - collaboration
  - server
  - websockets
---

Allow multiple users to collaborate on the canvas with **tldraw sync**, an optional module included with tldraw.

<div className="article__image" style={{ border: 'none' }}>
	<img
		alt="Multiplayer example using tldraw sync"
		src="/images/multiplayer.gif"
		style={{
			// learn this one weird trick for transparent animated gifs. doctors hate her!!!
			mask: 'url(/images/multiplayer_mask.png) luminance center 100% / 100% no-repeat',
			WebkitMask: 'url(/images/multiplayer_mask.png) luminance center 100% / 100% no-repeat',
		}}
	/>
</div>

Changes to a document are synchronized in realtime to other users, including presence information like live cursors. This requires you to run a backend server, although we provide a demo server you can use for testing.

## Try the demo server

The easiest way to start experimenting with multiplayer is with our demo server. Start by installing
`@tldraw/sync`:

```bash
npm install @tldraw/sync
```

Then, in your app, call the `useMutiplayerDemo` hook with a room ID. It'll return a
[`store`](/docs/persistence#The-store-prop) that you can pass into the tldraw component:

```tsx
function MyApp() {
	const store = useSyncDemo({ roomId: 'myApp-abc123' })
	return <Tldraw store={store} />
}
```

Make sure the room ID is unique. Anyone who uses the same ID can access your room. Our sync demo
server is a great way to prototype multiplayer in tldraw, but it shouldn't be used in production.
Rooms will be deleted after 24 hours.

## Self-host the backend

To use tldraw sync in production, you need to host the backend on your own server. There are three parts to sync in
tldraw:

1. The sync server, which serves the room over [WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API).
2. Somewhere to large assets that are too big to send over websockets, like images and videos.
3. The sync client, which connects to the server with the [`useSync`](?) hook.

We recommend starting from our [Cloudflare Workers
template](https://github.com/tldraw/tldraw-sync-cloudflare). This is a minimal setup of the
system that powers multiplayer collaboration for hundreds of thousands of rooms & users on
tldraw.com. It includes everything you need to get up and running with multiplayer tldraw quickly:
the sync server, asset hosting, and URL unfurling.

### TLSocketRoom

The core part of our sync server is [`TLSocketRoom`](?). It works with any JavaScript-based web
framework with support for WebSockets, and any storage backend: it's up to you to wire in those
parts yourself.

Make sure there's only ever one `TLSocketRoom` for each room in your app. If there's
more than one, users won't see each other and will overwrite others' changes. We use [Durable
Objects](https://developers.cloudflare.com/durable-objects/) to achieve this on tldraw.com.

If you don't want to our Cloudflare template, we also provide a [simple Node/Bun server
example](https://github.com/tldraw/tldraw/tree/main/apps/simple-server-example). This is not
production ready, but you can use it as a reference implementation to build it into your own
existing backend.

Read the reference docs for [`TLSocketRoom`](?) for more.

### Asset storage

As well as synchronizing the rapidly-changing document data, tldraw also needs a way to store and
retrieve large binary assets like images or videos.

You'll need to make sure your backend can handle asset uploads & downloads, then implement
[`TLAssetStore`](?) to connect it to tldraw.

- Read about [how assets work in tldraw](/docs/assets).
- Read the [`TLAssetStore`](?) reference docs.

### The sync client

The [`useSync`](?) hook connects your backend to the tldraw editor. Call the hook to create a store,
then pass it in to the `<Tldraw />` component:

```tsx
function MyApp() {
	const store = useSync({
		uri: 'https://myapp.com/tlsocketroom/my-room-id',
		assets: myAssetStore,
	})

	return <Tldraw store={store} />
}

const myAssetStore: TLAssetStore {
	upload(file, asset) {
		return uploadFileAndReturnUrl(file)
	},
	resolve(asset) {
		return asset.props.src
	},
}
```

The sync client automatically enables some default collaborative UX which you can customize using
editor [component overrides](/reference/tldraw/TLComponents):

- Collaborator cursors: [`TLComponents#CollaboratorCursor`](?)
- Cursor chat: [`TLComponents#CursorChatBubble`](?)
- Offline indicator: [`TLComponents#TopPanel`](?)
- Collaborator list: [`TLComponents#SharePanel`](?)

## Integrating other sync systems

While tldraw multiplayer is the easiest way to add sync capabilities to your tldraw canvas, you can
implement your own or use another off-the-shelf system.

One example is this [Yjs integration](https://github.com/tldraw/tldraw-yjs-example). Refer to the
[Persistence docs](/docs/persistence) for how to hook it together with your sync layer of choice.
